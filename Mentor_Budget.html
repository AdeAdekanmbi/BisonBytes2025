<!DOCTYPE html>
<html>
  <head>
    <title>MoneyMind Smart Dashboard</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript
      ><link rel="stylesheet" href="assets/css/noscript.css"
    /></noscript>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body class="is-preload">
    <div id="page-wrapper">
      <header id="header">
        <h1><a href="index.html">MoneyMind</a></h1>
        <nav id="nav">
          <ul>
            <li class="special">
              <a href="#menu" class="menuToggle"><span>Menu</span></a>
              <div id="menu">
                <ul>
                  <li><a href="index.html">Home</a></li>
                  <li><a href="marketplace.html">Marketplace</a></li>
                  <li><a href="#">Sign Up</a></li>
                  <li><a href="#">Log In</a></li>
                </ul>
              </div>
            </li>
          </ul>
        </nav>
      </header>

      <article id="main">
        <header>
          <h2>Financial Dashboard</h2>
          <p>Track your budget, set goals, and unlock smart insights.</p>
        </header>

        <section class="wrapper style5">
          <div class="inner">
            <ul class="actions fit">
              <li>
                <a href="Mentor_overview.html" class="button fit">Overview</a>
              </li>
              <li>
                <a href="Mentor_Budget.html" class="button primary fit"
                  >Budget</a
                >
              </li>
              <li><a href="Mentor_Goals.html" class="button fit">Goals</a></li>
              <li>
                <a href="Mentor_Smartmatching.html" class="button fit"
                  >Smart Matching</a
                >
              </li>
            </ul>

            <h4><strong>Current Budget</strong></h4>
            <p>
              You're currently on track with your budget. Update your values to
              see your status below.
            </p>

            <canvas
              id="budgetChart"
              width="300"
              height="300"
              style="max-width: 300px; margin: 0 auto 2em; display: block"
            ></canvas>

            <header><h3 class="major">Add Budget Details</h3></header>
            <form method="post" action="#">
              <div class="row gtr-uniform">
                <div class="col-6 col-12-xsmall">
                  <input
                    type="text"
                    name="income"
                    id="income"
                    placeholder="Monthly Income ($)"
                  />
                </div>
                <div class="col-6 col-12-xsmall">
                  <input
                    type="text"
                    name="rent"
                    id="rent"
                    placeholder="Rent/Housing ($)"
                  />
                </div>
                <div class="col-6 col-12-xsmall">
                  <input
                    type="text"
                    name="food"
                    id="food"
                    placeholder="Food/Groceries ($)"
                  />
                </div>
                <div class="col-6 col-12-xsmall">
                  <input
                    type="text"
                    name="transportation"
                    id="transportation"
                    placeholder="Transportation ($)"
                  />
                </div>
                <div class="col-12">
                  <textarea
                    name="notes"
                    id="notes"
                    placeholder="Additional Notes or Expenses"
                    rows="4"
                  ></textarea>
                </div>
                <div class="col-12">
                  <ul class="actions">
                    <li>
                      <input
                        type="submit"
                        value="Save Budget Info"
                        class="primary"
                      />
                    </li>
                    <li><input type="reset" value="Reset" /></li>
                  </ul>
                </div>
              </div>
            </form>
          </div>
        </section>
      </article>

      <footer id="footer">
        <ul class="icons">
          <li>
            <a href="#" class="icon brands fa-twitter"
              ><span class="label">Twitter</span></a
            >
          </li>
          <li>
            <a href="#" class="icon brands fa-facebook-f"
              ><span class="label">Facebook</span></a
            >
          </li>
          <li>
            <a href="#" class="icon brands fa-instagram"
              ><span class="label">Instagram</span></a
            >
          </li>
          <li>
            <a href="#" class="icon brands fa-dribbble"
              ><span class="label">Dribbble</span></a
            >
          </li>
          <li>
            <a href="#" class="icon solid fa-envelope"
              ><span class="label">Email</span></a
            >
          </li>
        </ul>
        <ul class="copyright">
          <li>&copy; MoneyMind</li>
          <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
        </ul>
      </footer>
    </div>

    <!-- Core Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Budget Storage + Chart Logic -->
    <script>
      const budgetFields = [
        "income",
        "rent",
        "food",
        "transportation",
        "notes",
      ];
      const inputMap = {};

      budgetFields.forEach((field) => {
        inputMap[field] = document.getElementById(field);
      });

      const ctx = document.getElementById("budgetChart").getContext("2d");
      const budgetChart = new Chart(ctx, {
        type: "doughnut",
        data: {
          labels: [
            "Rent/Housing",
            "Food/Groceries",
            "Transportation",
            "Remaining",
          ],
          datasets: [
            {
              data: [0, 0, 0, 0],
              backgroundColor: ["#f56942", "#ffc107", "#17a2b8", "#28a745"],
            },
          ],
        },
        options: {
          cutout: "70%",
          plugins: {
            legend: {
              display: true,
              position: "bottom",
            },
          },
        },
      });

      function updateChartFromInputs() {
        const income = parseFloat(inputMap["income"].value) || 0;
        const rent = parseFloat(inputMap["rent"].value) || 0;
        const food = parseFloat(inputMap["food"].value) || 0;
        const transportation =
          parseFloat(inputMap["transportation"].value) || 0;
        const totalSpent = rent + food + transportation;
        const remaining = Math.max(income - totalSpent, 0);

        budgetChart.data.datasets[0].data = [
          rent,
          food,
          transportation,
          remaining,
        ];
        budgetChart.update();
      }

      window.addEventListener("load", () => {
        budgetFields.forEach((field) => {
          const input = inputMap[field];
          if (input) {
            input.value = localStorage.getItem(`budget-${field}`) || "";
            input.addEventListener("input", () => {
              localStorage.setItem(`budget-${field}`, input.value);
              updateChartFromInputs();
            });
          }
        });
        updateChartFromInputs();
      });
    </script>
  </body>
</html>
